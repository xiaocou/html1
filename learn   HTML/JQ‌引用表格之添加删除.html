<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="http://code.jquery.com/jquery-latest.js"></script>
	<script type="text/javascript" src="../lib/jquery-tmpl/jquery.tmpl.js"></script>
	<style type="text/css">
		input{
			width: 32px;
		}
		input:last-child{
			width: 67px;
		}
	</style>
</head>
<body>
	<button id="add">新增学员</button>
	<table id="studentList">
		<thead>
			<tr>
				<td>ID</td>
				<td>姓名</td>
				<td>院系</td>
				<td>班级</td>
				<td>年龄</td>
				<td>操作</td>
			</tr>
		</thead>
		<tbody></tbody>
	</table>
	<form id="addStudent" style="display: none;">
		<input type="text" id="id">
		<input type="text" id="sname">
		<input type="text" id="college">
		<input type="text" id="className">
		<input type="text" id="age">
		<input type="button" value="新增学员" id="btnAdd">
	</form>
	<!-- 创建目录 -->
	<script id="myTmpl" type="text/x-jquery-tmpl">
		<tr>
			<td>${id}</td>
			<td>${sname}</td>
			<td>${college}</td>
			<td>${className}</td>
			<td>${age}</td>
			<td>
				<button>删除</button>
			</td>
		</tr>
	</script>
	<!-- 创建数据 -->
	<script type="text/javascript">
		var data = [
		{id:'10001',sname:'小珠',college:'计科',className:'131',age:20},
		{id:'10002',sname:'小光',college:'计科',className:'131',age:20},
		{id:'10003',sname:'小涛',college:'计科',className:'131',age:20},
		{id:'10004',sname:'小丽',college:'计科',className:'131',age:20},
		{id:'10005',sname:'小阳',college:'计科',className:'131',age:20}
	];
	// 使用模板
	// 初始化模板时可以进行事件监听
	$('#myTmpl').tmpl(data).appendTo('#studentList>tbody').find('button').click(function(){
		// 删除方法
		// 使用$.tmplItem(this)方法获取当前模板的jq对象
		var item=$.tmplItem(this);
		item.nodes[0].remove();
	});
	// 拿到页面上的新增学员按钮，添加方法，让form显示
	$('#add').click(function(){
		$('#addStudent').show();
	});
	$('#btnAdd').click(function(){
	var newStu={};
	newStu.id=$('#id').val();
	newStu.sname=$('#sname').val();
	newStu.college=$('#college').val();
	newStu.className=$('#className').val();
	newStu.age=$('#age').val();
	// 添加到data数据中
	// data.push(newStu);
	// 添加到表格	
	$('#myTmpl').tmpl(newStu).appendTo('#studentList>tbody').find('button').click(function(){
		// 删除方法
		// 使用$.tmplItem(this)方法获取当前模板的jq对象
		var item=$.tmplItem(this);
		item.nodes[0].remove();
	});
	});

	</script>
</body>
</html>